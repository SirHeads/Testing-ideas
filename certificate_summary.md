# Phoenix Hypervisor Certificate Summary

This document provides a comprehensive summary of all SSL/TLS certificates used within the Phoenix Hypervisor ecosystem. The system uses a centralized internal Certificate Authority (CA) to issue and manage certificates for all internal services.

## 1. Certificate Authority (CA)

*   **CA Service:** Smallstep Step-CA
*   **Location:** LXC Container 103 (Step-CA)
*   **Purpose:** Acts as the root of trust for the entire internal network. It is responsible for issuing and signing certificates for all other services.

## 2. Root CA Certificate

*   **Certificate Name:** `phoenix_ca.crt`
*   **Location on Hypervisor:** `/mnt/pve/quickOS/lxc-persistent-data/103/ssl/phoenix_ca.crt`
*   **Purpose:** This is the root certificate for the internal CA. It is distributed to all guests that need to trust the internal services.
*   **Distribution:** The `trusted_ca` feature script is responsible for copying this certificate to the trust store of any guest that includes it in its feature list.

## 3. Service Certificates

| Service | Hostname(s) | Location | Issuer | Purpose |
|---|---|---|---|---|
| Nginx Gateway | `*.internal.thinkheads.ai` | LXC 101: `/etc/nginx/ssl/` | Step-CA (LXC 103) | Secures the Nginx gateway and provides a secure entry point for external traffic. |
| Traefik Internal Proxy | `traefik.internal.thinkheads.ai`, `granite-embedding.internal.thinkheads.ai`, `granite-3b.internal.thinkheads.ai`, `ollama.internal.thinkheads.ai`, `llamacpp.internal.thinkheads.ai` | LXC 102: Managed by Traefik | Step-CA (LXC 103) | Secures the Traefik dashboard and all internal services managed by Traefik. |
| Portainer Server | `portainer.phoenix.local` | VM 1001: `/persistent-storage/portainer/certs/` | Step-CA (LXC 103) | Secures the Portainer web UI. |
| Portainer Agent | `agent.agent.phoenix.local` | VM 1002: `/persistent-storage/certs/` | Step-CA (LXC 103) | Secures communication between the Portainer server and the agent. |

## 4. Proxmox Central Certificate

The Proxmox central certificate is not directly managed by the Phoenix Hypervisor scripts. It is the self-signed certificate generated by Proxmox upon installation and is used to secure the Proxmox web UI. While the Phoenix Hypervisor system does not modify this certificate, it is important to note that all services running on the hypervisor will implicitly trust it. For a production environment, it is recommended to replace the default Proxmox certificate with one from a trusted public CA.
