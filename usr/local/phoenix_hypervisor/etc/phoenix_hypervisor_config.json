{
    "version": "1.0.0",
    "author": "Heads, Qwen3-coder, Roo",
    "domain_name": "internal.thinkheads.ai",
    "users": {
        "username": "phoenix_admin",
        "password_hash": "NOT_SET",
        "sudo_access": true,
        "ssh_public_key": ""
    },
    "core_paths": {
        "lxc_config_file": "/usr/local/phoenix_hypervisor/etc/phoenix_lxc_configs.json",
        "lxc_config_schema_file": "/usr/local/phoenix_hypervisor/etc/phoenix_lxc_configs.schema.json",
        "vm_config_file": "/usr/local/phoenix_hypervisor/etc/phoenix_vm_configs.json",
        "hf_token_file": "/usr/local/phoenix_hypervisor/etc/phoenix_hf_token.conf",
        "docker_token_file": "/usr/local/phoenix_hypervisor/etc/phoenix_docker_token.conf",
        "docker_images_path": "/usr/local/phoenix_hypervisor/etc/proxmox_docker_images",
        "hypervisor_marker_dir": "/usr/local/phoenix_hypervisor/lib",
        "hypervisor_marker": "/usr/local/phoenix_hypervisor/lib/.phoenix_hypervisor_initialized"
    },
    "timezone": "America/New_York",
    "network": {
        "external_registry_url": "docker.io/SirHeads",
        "portainer_server_ip": "10.0.0.111",
        "portainer_server_port": 9443,
        "portainer_agent_port": 9001,
        "interfaces": {
            "name": "vmbr0",
            "address": "10.0.0.13/24",
            "gateway": "10.0.0.1",
            "dns_nameservers": [
                "10.0.0.153",
                "8.8.8.8"
            ]
        },
        "default_subnet": "10.0.0.0/24",
        "nfs_server": "10.0.0.13",
        "fallback_dns": "8.8.8.8"
    },
    "docker": {
        "portainer_server_image": "portainer/portainer-ce:latest",
        "portainer_agent_image": "portainer/agent:latest"
    },
    "nfs": {
        "exports": [
            {
                "path": "/quickOS/vm-persistent-data",
                "clients": [
                    "10.0.0.111",
                    "10.0.0.102",
                    "10.0.0.13"
                ],
                "options": [
                    "rw",
                    "sync",
                    "no_subtree_check",
                    "no_root_squash"
                ]
            },
            {
                "path": "/quickOS/portainer_stacks",
                "clients": [
                    "10.0.0.111"
                ],
                "options": [
                    "rw",
                    "sync",
                    "no_subtree_check"
                ]
            }
        ]
    },
    "samba": {
        "user": "heads",
        "shares": [
            {
                "name": "shared-prod-data",
                "path": "quickOS/shared-prod-data",
                "options": "browseable=yes writable=yes",
                "valid_users": [
                    "heads"
                ]
            },
            {
                "name": "shared-prod-data-sync",
                "path": "quickOS/shared-prod-data-sync",
                "options": "browseable=yes writable=yes",
                "valid_users": [
                    "heads"
                ]
            },
            {
                "name": "shared-test-data",
                "path": "fastData/shared-test-data",
                "options": "browseable=yes writable=yes",
                "valid_users": [
                    "heads"
                ]
            },
            {
                "name": "shared-bulk-data",
                "path": "fastData/shared-bulk-data",
                "options": "browseable=yes writable=yes",
                "valid_users": [
                    "heads"
                ]
            },
            {
                "name": "shared-test-data-sync",
                "path": "fastData/shared-test-data-sync",
                "options": "browseable=yes writable=yes",
                "valid_users": [
                    "heads"
                ]
            }
        ]
    },
    "zfs": {
        "arc_max_gb": 32,
        "pools": [
            {
                "name": "quickOS",
                "raid_level": "mirror",
                "disks": [
                    "/dev/disk/by-id/nvme-Samsung_SSD_990_EVO_Plus_2TB_S7U6NJ0Y320880M",
                    "/dev/disk/by-id/nvme-Samsung_SSD_990_EVO_Plus_2TB_S7U6NJ0Y310536X"
                ]
            },
            {
                "name": "fastData",
                "raid_level": "single",
                "disks": [
                    "/dev/disk/by-id/nvme-Samsung_SSD_990_EVO_Plus_4TB_S7U8NJ0Y402334Y"
                ]
            }
        ],
        "datasets": [
            {
                "name": "vm-disks",
                "pool": "quickOS",
                "properties": "recordsize=128K,compression=lz4,sync=standard,quota=800G",
                "proxmox_storage_type": "zfspool",
                "proxmox_content_type": "images",
                "storage_class": "direct"
            },
            {
                "name": "lxc-disks",
                "pool": "quickOS",
                "properties": "recordsize=16K,compression=lz4,sync=standard,quota=600G",
                "proxmox_storage_type": "zfspool",
                "proxmox_content_type": "images,rootdir",
                "storage_class": "direct"
            },
            {
                "name": "shared-prod-data",
                "pool": "quickOS",
                "properties": "recordsize=128K,compression=lz4,sync=standard,quota=400G",
                "proxmox_storage_type": "zfspool",
                "proxmox_content_type": "images,rootdir",
                "storage_class": "shared"
            },
            {
                "name": "shared-prod-data-sync",
                "pool": "quickOS",
                "properties": "recordsize=16K,compression=lz4,sync=always,quota=100G",
                "proxmox_storage_type": "zfspool",
                "proxmox_content_type": "images",
                "storage_class": "shared"
            },
            {
                "name": "shared-test-data",
                "pool": "fastData",
                "properties": "recordsize=128K,compression=lz4,sync=standard,quota=500G",
                "proxmox_storage_type": "zfspool",
                "proxmox_content_type": "images,rootdir",
                "storage_class": "shared"
            },
            {
                "name": "shared-test-data-sync",
                "pool": "fastData",
                "properties": "recordsize=16K,compression=lz4,sync=always,quota=100G",
                "proxmox_storage_type": "zfspool",
                "proxmox_content_type": "images,rootdir",
                "storage_class": "shared"
            },
            {
                "name": "shared-backups",
                "pool": "fastData",
                "properties": "recordsize=1M,compression=zstd,sync=standard,quota=2T",
                "proxmox_storage_type": "dir",
                "proxmox_content_type": "backup",
                "storage_class": "shared"
            },
            {
                "name": "shared-bulk-data",
                "pool": "fastData",
                "properties": "recordsize=1M,compression=lz4,sync=standard,quota=1.4T",
                "proxmox_storage_type": "zfspool",
                "proxmox_content_type": "images,rootdir",
                "storage_class": "shared"
            },
            {
                "name": "vm-persistent-data",
                "pool": "quickOS",
                "properties": "recordsize=128K,compression=lz4,sync=standard,quota=10G",
                "proxmox_storage_type": "dir",
                "proxmox_content_type": "images,rootdir",
                "storage_class": "shared"
            },
            {
                "name": "lxc-persistent-data",
                "pool": "quickOS",
                "properties": "recordsize=128K,compression=lz4,sync=standard,quota=10G",
                "proxmox_storage_type": "zfspool",
                "proxmox_content_type": "images,rootdir",
                "storage_class": "shared"
            },
            {
                "name": "shared-iso",
                "pool": "fastData",
                "properties": "recordsize=1M,compression=lz4,sync=standard,quota=100G",
                "proxmox_storage_type": "dir",
                "proxmox_content_type": "iso,vztmpl",
                "storage_class": "shared"
            },
            {
                "name": "portainer_stacks",
                "pool": "quickOS",
                "properties": "",
                "proxmox_storage_type": "dir",
                "proxmox_content_type": "snippets",
                "storage_class": "shared"
            }
        ]
    },
    "proxmox_storage_ids": {
        "quickos_vm": "quickOS-vm-disks",
        "quickos_lxc": "quickOS-lxc-disks",
        "fastData_shared_backups": "fastData-shared-backups",
        "fastData_shared_iso": "fastData-shared-iso",
        "quickos_lxc_persistent_data": "quickOS-lxc-persistent-data"
    },
    "mount_point_base": "/mnt/pve",
    "proxmox_defaults": {
        "zfs_lxc_pool": "quickOS/lxc-disks",
        "lxc": {
            "cores": 2,
            "memory_mb": 2048,
            "network_config": "10.0.0.110/24,10.0.0.1,8.8.8.8",
            "features": "nesting=1",
            "security": "default",
            "nesting": 1
        }
    },
    "tests": {
        "system_validation": [
            {
                "name": "Validate Systemic Fixes",
                "type": "script",
                "path": "hypervisor/validate_systemic_fixes.sh"
            }
        ],
        "hypervisor_health_.check": [
            {
                "name": "Phoenix Hypervisor Tests",
                "type": "script",
                "path": "hypervisor/phoenix_hypervisor_tests.sh"
            }
        ]
    },
    "nvidia_driver": {
        "install": true,
        "version": "580.76.05",
        "runfile_url": "https://us.download.nvidia.com/XFree86/Linux-x86_64/580.76.05/NVIDIA-Linux-x86_64-580.76.05.run",
        "cuda_version": "12.8",
        "install_vllm_libs": true
    },
    "behavior": {
        "rollback_on_failure": false,
        "debug_mode": true
    },
    "shared_volumes": {
        "ssl_certs": {
            "host_path": "/mnt/pve/quickOS/shared-prod-data/ssl",
            "mounts": {
                "953": "/etc/nginx/ssl",
                "910": "/certs",
                "954": "/certs"
            }
        },
        "nginx_sites": {
            "host_path": "/usr/local/phoenix_hypervisor/etc/nginx/sites-available",
            "mounts": {
                "953": "/etc/nginx/sites-available"
            }
        },
        "nginx_logs": {
            "host_path": "/mnt/pve/quickOS/shared-prod-data/logs/nginx",
            "mounts": {
                "953": "/logs/nginx"
            }
        },
        "ollama_models": {
            "host_path": "/mnt/pve/fastData/shared-bulk-data/ollama_models",
            "mounts": {
                "955": "/ollama_models"
            }
        },
        "llamacpp_models": {
            "host_path": "/mnt/pve/fastData/shared-bulk-data/llamacpp_models",
            "mounts": {
                "957": "/llamacpp_models"
            }
        },
        "vllm_models": {
            "host_path": "/mnt/pve/fastData/shared-bulk-data/vllm_models",
            "mounts": {
                "950": "/vllm_models",
                "951": "/vllm_models"
            }
        }
    },
    "firewall": {
        "enabled": true,
        "default_input_policy": "DROP",
        "default_output_policy": "ACCEPT",
        "global_firewall_rules": [
            {
                "type": "in",
                "action": "ACCEPT",
                "proto": "tcp",
                "port": "80",
                "comment": "Allow HTTP for ACME challenges to Nginx"
            },
            {
                "type": "in",
                "action": "ACCEPT",
                "proto": "tcp",
                "port": "443",
                "comment": "Allow external HTTPS traffic to the Nginx gateway"
            },
            {
                "type": "in",
                "action": "ACCEPT",
                "source": "10.0.0.0/24",
                "dest": "10.0.0.13",
                "proto": "udp",
                "port": "53",
                "comment": "Allow internal guests to query DNS on Host"
            },
            {
                "type": "in",
                "action": "ACCEPT",
                "source": "10.0.0.0/24",
                "dest": "10.0.0.13",
                "proto": "tcp",
                "port": "53",
                "comment": "Allow internal guests to query DNS on Host"
            },
            {
                "type": "in",
                "action": "ACCEPT",
                "source": "10.0.0.0/24",
                "dest": "10.0.0.13",
                "proto": "tcp",
                "port": "2049",
                "comment": "Allow internal guests to access NFS on Host"
            },
            {
                "type": "in",
                "action": "ACCEPT",
                "source": "10.0.0.111",
                "dest": "10.0.0.102",
                "proto": "tcp",
                "port": "9001",
                "comment": "Allow Portainer server to connect to agent"
            },
            {
                "type": "in",
                "action": "ACCEPT",
                "source": "10.0.0.111",
                "dest": "10.0.0.102",
                "comment": "DEBUG: Allow all traffic from Portainer server to agent"
            },
            {
                "type": "in",
                "action": "ACCEPT",
                "source": "10.0.0.13",
                "dest": "10.0.0.111",
                "proto": "tcp",
                "port": "9000",
                "comment": "Allow Proxmox host to access Portainer for initial setup"
            },
            {
                "type": "in",
                "action": "ACCEPT",
                "source": "10.0.0.13",
                "dest": "10.0.0.153",
                "proto": "tcp",
                "port": "443",
                "comment": "Allow Proxmox host to connect to the NGINX gateway for API calls"
            },
            {
                "type": "in",
                "action": "ACCEPT",
                "source": "10.0.0.12",
                "dest": "10.0.0.111",
                "proto": "tcp",
                "port": "9443",
                "comment": "Allow Traefik to proxy to Portainer"
            },
            {
                "type": "in",
                "action": "ACCEPT",
                "proto": "tcp",
                "port": "2049",
                "source": "10.0.0.0/24",
                "comment": "Allow internal NFS connections to the host"
            },
            {
                "type": "in",
                "action": "ACCEPT",
                "source": "10.0.0.0/24",
                "dest": "10.0.0.13",
                "proto": "tcp",
                "port": "111",
                "comment": "Allow internal guests to access NFS rpcbind on Host"
            },
            {
                "type": "in",
                "action": "ACCEPT",
                "source": "10.0.0.0/24",
                "dest": "10.0.0.13",
                "proto": "udp",
                "port": "111",
                "comment": "Allow internal guests to access NFS rpcbind on Host"
            },
            {
                "type": "in",
                "action": "ACCEPT",
                "source": "10.0.0.0/24",
                "dest": "10.0.0.13",
                "proto": "tcp",
                "port": "20048",
                "comment": "Allow internal guests to access NFS mountd on Host"
            },
            {
                "type": "in",
                "action": "ACCEPT",
                "source": "10.0.0.0/24",
                "dest": "10.0.0.13",
                "proto": "udp",
                "port": "20048",
                "comment": "Allow internal guests to access NFS mountd on Host"
            }
        ]
    },
    "portainer_api": {
        "admin_user": "admin",
        "admin_password": "NewKick@$$2025",
        "portainer_hostname": "portainer.internal.thinkheads.ai",
        "api_key": null
    },
    "vm_defaults": {
        "ubuntu_release": "noble"
    },
    "dns_server": {
        "enabled": true,
        "upstream_servers": [
            "8.8.8.8",
            "1.1.1.1"
        ],
        "authoritative_zones": []
    },
    "step_ca": {
        "root_ca_name": "ThinkHeads Internal CA",
        "intermediate_ca_name": "ThinkHeads Internal CA Intermediate CA",
        "dns_name": "ca.internal.thinkheads.ai",
        "provisioner_name": "admin@thinkheads.ai"
    }
}