upstream traefik_mesh {
    server 10.0.0.12:8443;
}

server {
    listen 8443 ssl;

    # Gateway's own server certificate (presented to clients/browsers)
    ssl_certificate     /etc/nginx/ssl/nginx.internal.thinkheads.ai.crt;
    ssl_certificate_key /etc/nginx/ssl/nginx.internal.thinkheads.ai.key;

    # mTLS: certificate that nginx presents to Traefik
    proxy_ssl_certificate     /etc/nginx/ssl/nginx-client.crt;
    proxy_ssl_certificate_key /etc/nginx/ssl/nginx-client.key;

    # Verify Traefikâ€™s certificate against your internal root CA
    proxy_ssl_trusted_certificate /usr/local/share/ca-certificates/phoenix_root_ca.crt;
    proxy_ssl_verify        on;
    proxy_ssl_verify_depth  2;

    proxy_pass traefik_mesh;
    proxy_ssl  on;
}