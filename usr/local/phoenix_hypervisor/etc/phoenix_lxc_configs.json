{
    "$schema": "/usr/local/phoenix_hypervisor/etc/phoenix_lxc_configs.schema.json",
    "nvidia_driver_version": "580.76.05",
    "nvidia_repo_url": "https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2404/x86_64/",
    "nvidia_runfile_url": "https://us.download.nvidia.com/XFree86/Linux-x86_64/580.76.05/NVIDIA-Linux-x86_64-580.76.05.run",
    "lxc_configs": {
        "900": {
            "name": "Copy-Base",
            "start_at_boot": false,
            "boot_order": 0,
            "boot_delay": 0,
            "memory_mb": 2048,
            "cores": 2,
            "template": "/fastData/shared-iso/template/cache/ubuntu-24.04-standard_24.04-2_amd64.tar.zst",
            "storage_pool": "quickOS-lxc-disks",
            "storage_size_gb": 16,
            "network_config": {
                "name": "eth0",
                "bridge": "vmbr0",
                "ip": "10.0.0.200/24",
                "gw": "10.0.0.1"
            },
            "mac_address": "52:54:00:AA:BB:CC",
            "gpu_assignment": "none",
            "portainer_role": "none",
            "unprivileged": true,
            "features": [
                "base_setup"
            ],
            "lxc_options": [
                "lxc.apparmor.profile=unconfined"
            ],
            "template_snapshot_name": "final-form",
            "apparmor_profile": "unconfined",
            "apparmor_manages_nesting": true,
            "enable_lifecycle_snapshots": true
        },
        "901": {
            "name": "Copy-Cuda12.8",
            "start_at_boot": false,
            "boot_order": 0,
            "boot_delay": 0,
            "memory_mb": 2048,
            "cores": 2,
            "storage_pool": "quickOS-lxc-disks",
            "storage_size_gb": 16,
            "network_config": {
                "name": "eth0",
                "bridge": "vmbr0",
                "ip": "10.0.0.201/24",
                "gw": "10.0.0.1"
            },
            "mac_address": "52:54:00:AA:BB:CD",
            "gpu_assignment": "0, 1",
            "portainer_role": "none",
            "unprivileged": true,
            "clone_from_ctid": "900",
            "features": [
                "nvidia"
            ],
            "lxc_options": [
                "lxc.apparmor.profile=unconfined"
            ],
            "template_snapshot_name": "final-form",
            "apparmor_profile": "unconfined",
            "apparmor_manages_nesting": true,
            "enable_lifecycle_snapshots": true
        },
        "910": {
            "name": "Copy-VLLM-GPUx2",
            "start_at_boot": false,
            "boot_order": 0,
            "boot_delay": 0,
            "memory_mb": 72000,
            "cores": 10,
            "storage_pool": "quickOS-lxc-disks",
            "storage_size_gb": 128,
            "network_config": {
                "name": "eth0",
                "bridge": "vmbr0",
                "ip": "10.0.0.220/24",
                "gw": "10.0.0.1"
            },
            "mac_address": "52:54:00:AA:BB:D1",
            "gpu_assignment": "0,1",
            "unprivileged": true,
            "portainer_role": "none",
            "clone_from_ctid": "901",
            "features": [
                "nvidia",
                "vllm"
            ],
            "application_script": "phoenix_hypervisor_lxc_vllm.sh",
            "vllm_engine_config": {
                "ModelConfig": {
                    "model": "Qwen/Qwen2.5-7B-Instruct-AWQ",
                    "trust_remote_code": true,
                    "dtype": "auto",
                    "max_model_len": 4096
                },
                "CacheConfig": {
                    "quantization": "awq_marlin",
                    "gpu_memory_utilization": 0.50
                },
                "ParallelConfig": {
                    "tensor_parallel_size": 2
                },
                "ServerConfig": {
                    "host": "0.0.0.0",
                    "port": 8000,
                    "served_model_name": "qwen2.5-7b-awq"
                }
            },
            "template_snapshot_name": "final-form",
            "apparmor_profile": "unconfined",
            "apparmor_manages_nesting": true,
            "enable_lifecycle_snapshots": true,
            "lxc_options": [
                "lxc.apparmor.profile=unconfined"
            ]
        },
        "911": {
            "name": "Copy-VLLM-GPU0",
            "clone_from_ctid": "901",
            "start_at_boot": false,
            "boot_order": 0,
            "boot_delay": 0,
            "memory_mb": 72000,
            "cores": 10,
            "storage_pool": "quickOS-lxc-disks",
            "storage_size_gb": 64,
            "network_config": {
                "name": "eth0",
                "bridge": "vmbr0",
                "ip": "10.0.0.221/24",
                "gw": "10.0.0.1"
            },
            "mac_address": "52:54:00:AA:BB:D2",
            "gpu_assignment": "0",
            "features": [
                "nvidia",
                "vllm"
            ],
            "application_script": "phoenix_hypervisor_lxc_vllm.sh",
            "vllm_engine_config": {
                "ModelConfig": {
                    "model": "Qwen/Qwen2-7B-Instruct",
                    "trust_remote_code": true,
                    "dtype": "auto",
                    "max_model_len": 8192
                },
                "CacheConfig": {
                    "quantization": "fp8",
                    "gpu_memory_utilization": 0.9
                },
                "ParallelConfig": {
                    "tensor_parallel_size": 1
                },
                "ServerConfig": {
                    "host": "0.0.0.0",
                    "port": 8000,
                    "served_model_name": "qwen2-7b-fp8"
                }
            },
            "template_snapshot_name": "final-form",
            "apparmor_profile": "unconfined",
            "apparmor_manages_nesting": true,
            "enable_lifecycle_snapshots": true,
            "lxc_options": [
                "lxc.apparmor.profile=unconfined"
            ]
        },
        "912": {
            "name": "Copy-VLLM-GPU1",
            "clone_from_ctid": "901",
            "start_at_boot": false,
            "boot_order": 0,
            "boot_delay": 0,
            "memory_mb": 72000,
            "cores": 10,
            "storage_pool": "quickOS-lxc-disks",
            "storage_size_gb": 64,
            "network_config": {
                "name": "eth0",
                "bridge": "vmbr0",
                "ip": "10.0.0.222/24",
                "gw": "10.0.0.1"
            },
            "mac_address": "52:54:00:AA:BB:D3",
            "gpu_assignment": "1",
            "features": [
                "nvidia",
                "vllm"
            ],
            "application_script": "phoenix_hypervisor_lxc_vllm.sh",
            "vllm_engine_config": {
                "ModelConfig": {
                    "model": "Qwen/Qwen2-7B-Instruct",
                    "trust_remote_code": true,
                    "dtype": "auto",
                    "max_model_len": 8192
                },
                "CacheConfig": {
                    "quantization": "fp8",
                    "gpu_memory_utilization": 0.9
                },
                "ParallelConfig": {
                    "tensor_parallel_size": 1
                },
                "ServerConfig": {
                    "host": "0.0.0.0",
                    "port": 8000,
                    "served_model_name": "qwen2-7b-fp8"
                }
            },
            "template_snapshot_name": "final-form",
            "apparmor_profile": "unconfined",
            "apparmor_manages_nesting": true,
            "enable_lifecycle_snapshots": true,
            "lxc_options": [
                "lxc.apparmor.profile=unconfined"
            ]
        },
        "801": {
            "name": "granite-embedding",
            "memory_mb": 72000,
            "cores": 6,
            "storage_pool": "quickOS-lxc-disks",
            "storage_size_gb": 128,
            "network_config": {
                "name": "eth0",
                "bridge": "vmbr0",
                "ip": "10.0.0.141/24",
                "gw": "10.0.0.1"
            },
            "mac_address": "52:54:00:67:89:A1",
            "gpu_assignment": "0",
            "unprivileged": true,
            "portainer_role": "none",
            "clone_from_ctid": "911",
            "features": [
                "vllm"
            ],
            "application_script": "phoenix_hypervisor_lxc_vllm.sh",
            "ports": [
                "8000:8000"
            ],
            "vllm_engine_config": {
                "ModelConfig": {
                    "model": "ibm-granite/granite-embedding-english-r2",
                    "trust_remote_code": true,
                    "dtype": "auto",
                    "max_model_len": 1024
                },
                "CacheConfig": {
                    "gpu_memory_utilization": 0.1
                },
                "ParallelConfig": {
                    "tensor_parallel_size": 1
                },
                "ServerConfig": {
                    "host": "0.0.0.0",
                    "port": 8000,
                    "served_model_name": "ibm-granite/granite-embedding-english-r2"
                }
            },
            "pct_options": [],
            "firewall": {
                "enabled": true,
                "rules": [
                    {
                        "type": "in",
                        "action": "ACCEPT",
                        "source": "10.0.0.153",
                        "proto": "tcp",
                        "port": "8000"
                    }
                ]
            },
            "dependencies": [
                "101"
            ],
            "start_at_boot": true,
            "boot_order": 3,
            "boot_delay": 5,
            "zfs_volumes": [
                {
                    "name": "vllm_models",
                    "pool": "fastData-shared-bulk-data",
                    "size_gb": 50,
                    "mount_point": "/vllm_models"
                }
            ],
            "apparmor_profile": "unconfined",
            "apparmor_manages_nesting": true,
            "lxc_options": [
                "lxc.apparmor.profile=unconfined"
            ],
            "tests": {
                "integration_tests": [
                    {
                        "name": "vLLM Context Window Test",
                        "type": "script",
                        "path": "vllm/test_vllm_context_window.py"
                    },
                    {
                        "name": "vLLM Responsiveness Test",
                        "type": "script",
                        "path": "vllm/test_vllm_responsiveness.py"
                    }
                ]
            }
        },
        "802": {
            "name": "granite-3.3-8b-fp8",
            "memory_mb": 72000,
            "cores": 6,
            "storage_pool": "quickOS-lxc-disks",
            "storage_size_gb": 128,
            "network_config": {
                "name": "eth0",
                "bridge": "vmbr0",
                "ip": "10.0.0.142/24",
                "gw": "10.0.0.1"
            },
            "mac_address": "52:54:00:67:89:A2",
            "gpu_assignment": "0",
            "unprivileged": true,
            "portainer_role": "none",
            "clone_from_ctid": "911",
            "features": [
                "vllm"
            ],
            "application_script": "phoenix_hypervisor_lxc_vllm.sh",
            "ports": [
                "8001:8000"
            ],
            "vllm_engine_config": {
                "ModelConfig": {
                    "model": "Qwen/Qwen3-4B-Thinking-2507-FP8",
                    "trust_remote_code": true,
                    "dtype": "auto",
                    "max_model_len": 2048
                },
                "CacheConfig": {
                    "quantization": "fp8",
                    "gpu_memory_utilization": 0.85
                },
                "ParallelConfig": {
                    "tensor_parallel_size": 1
                },
                "ServerConfig": {
                    "host": "0.0.0.0",
                    "port": 8000,
                    "served_model_name": "Qwen3-4B-FP8"
                }
            },
            "start_at_boot": true,
            "boot_order": 3,
            "boot_delay": 5,
            "dependencies": [
                "101"
            ],
            "zfs_volumes": [
                {
                    "name": "vllm_models",
                    "pool": "fastData-shared-bulk-data",
                    "size_gb": 50,
                    "mount_point": "/vllm_models"
                }
            ],
            "apparmor_profile": "unconfined",
            "apparmor_manages_nesting": true,
            "lxc_options": [
                "lxc.apparmor.profile=unconfined"
            ]
        },
        "950": {
            "name": "vllm-qwen2.5-7b-awq",
            "memory_mb": 72000,
            "cores": 6,
            "storage_pool": "quickOS-lxc-disks",
            "storage_size_gb": 128,
            "network_config": {
                "name": "eth0",
                "bridge": "vmbr0",
                "ip": "10.0.0.150/24",
                "gw": "10.0.0.1"
            },
            "mac_address": "52:54:00:67:89:B0",
            "gpu_assignment": "1",
            "unprivileged": true,
            "portainer_role": "none",
            "clone_from_ctid": "910",
            "features": [
                "vllm"
            ],
            "application_script": "phoenix_hypervisor_lxc_vllm.sh",
            "ports": [
                "8000:8000"
            ],
            "vllm_model": "Qwen/Qwen2.5-7B-Instruct-AWQ",
            "vllm_quantization": "awq",
            "vllm_max_model_len": 4096,
            "vllm_gpu_memory_utilization": 0.90,
            "vllm_tensor_parallel_size": 1,
            "vllm_served_model_name": "qwen2.5-7b-awq",
            "vllm_model_type": "chat",
            "vllm_port": 8000,
            "vllm_trust_remote_code": true,
            "vllm_parameters": {
                "dtype": "float16",
                "kv_cache_dtype": "auto",
                "max_model_len": 8192,
                "gpu_memory_utilization": 0.75,
                "max_num_batched_tokens": 8192,
                "max_num_seqs": 1
            },
            "vllm_args": [
                "--quantization",
                "awq",
                "--max-model-len",
                "4096",
                "--gpu-memory-utilization",
                "0.90",
                "--tensor-parallel-size",
                "1",
                "--served-model-name",
                "qwen2.5-7b-awq",
                "--trust-remote-code"
            ],
            "firewall": {
                "enabled": true,
                "rules": [
                    {
                        "type": "in",
                        "action": "ACCEPT",
                        "source": "10.0.0.153",
                        "proto": "tcp",
                        "port": "8000"
                    }
                ]
            },
            "dependencies": [
                "101"
            ],
            "start_at_boot": true,
            "boot_order": 3,
            "boot_delay": 5,
            "integration_tests": {
                "script": "run_vllm_integration_tests.sh"
            },
            "run_integration_tests": true,
            "zfs_volumes": [
                {
                    "name": "vllm_models",
                    "pool": "fastData-shared-bulk-data",
                    "size_gb": 50,
                    "mount_point": "/vllm_models"
                }
            ],
            "apparmor_profile": "unconfined",
            "apparmor_manages_nesting": true,
            "lxc_options": [
                "lxc.apparmor.profile=unconfined"
            ],
            "tests": {
                "health_checks": [
                    {
                        "name": "Dummy Pass",
                        "type": "script",
                        "path": "health_checks/dummy_pass.sh"
                    },
                    {
                        "name": "Dummy Fail",
                        "type": "script",
                        "path": "health_checks/dummy_fail.sh"
                    }
                ],
                "integration_tests": [
                    {
                        "name": "vLLM Context Window Test",
                        "type": "script",
                        "path": "vllm/test_vllm_context_window.py"
                    },
                    {
                        "name": "vLLM Responsiveness Test",
                        "type": "script",
                        "path": "vllm/test_vllm_responsiveness.py"
                    }
                ]
            },
            "vllm": [
                {
                    "name": "vLLM Integration Tests",
                    "type": "script",
                    "path": "run_vllm_integration_tests.sh"
                }
            ]
        },
        "951": {
            "name": "vllm-granite-embed-r2",
            "memory_mb": 72000,
            "cores": 6,
            "storage_pool": "quickOS-lxc-disks",
            "storage_size_gb": 128,
            "network_config": {
                "name": "eth0",
                "bridge": "vmbr0",
                "ip": "10.0.0.151/24",
                "gw": "10.0.0.1"
            },
            "mac_address": "52:54:00:67:89:B1",
            "gpu_assignment": "0",
            "unprivileged": true,
            "portainer_role": "none",
            "clone_from_ctid": "910",
            "features": [
                "vllm"
            ],
            "application_script": "phoenix_hypervisor_lxc_vllm.sh",
            "ports": [
                "8000:8000"
            ],
            "vllm_model": "ibm-granite/granite-embedding-english-r2",
            "vllm_served_model_name": "ibm-granite/granite-embedding-english-r2",
            "vllm_model_type": "embedding",
            "vllm_tensor_parallel_size": 1,
            "vllm_gpu_memory_utilization": 0.1,
            "vllm_max_model_len": 1024,
            "pct_options": [],
            "vllm_args": [
                "--tensor-parallel-size",
                "1",
                "--gpu-memory-utilization",
                "0.10",
                "--max-model-len",
                "1024"
            ],
            "firewall": {
                "enabled": true,
                "rules": [
                    {
                        "type": "in",
                        "action": "ACCEPT",
                        "source": "10.0.0.153",
                        "proto": "tcp",
                        "port": "8000"
                    }
                ]
            },
            "dependencies": [
                "101"
            ],
            "start_at_boot": true,
            "boot_order": 3,
            "boot_delay": 5,
            "zfs_volumes": [
                {
                    "name": "vllm_models",
                    "pool": "fastData-shared-bulk-data",
                    "size_gb": 50,
                    "mount_point": "/vllm_models"
                }
            ],
            "apparmor_profile": "unconfined",
            "apparmor_manages_nesting": true,
            "lxc_options": [
                "lxc.apparmor.profile=unconfined"
            ],
            "tests": {
                "integration_tests": [
                    {
                        "name": "vLLM Context Window Test",
                        "type": "script",
                        "path": "vllm/test_vllm_context_window.py"
                    },
                    {
                        "name": "vLLM Responsiveness Test",
                        "type": "script",
                        "path": "vllm/test_vllm_responsiveness.py"
                    }
                ]
            }
        },
        "952": {
            "name": "qdrant-VSCodeRag",
            "memory_mb": 2048,
            "cores": 2,
            "storage_pool": "quickOS-lxc-disks",
            "storage_size_gb": 32,
            "network_config": {
                "name": "eth0",
                "bridge": "vmbr0",
                "ip": "10.0.0.152/24",
                "gw": "10.0.0.1"
            },
            "mac_address": "52:54:00:67:89:B2",
            "gpu_assignment": "none",
            "unprivileged": true,
            "portainer_role": "none",
            "clone_from_ctid": "900",
            "features": [
                "docker"
            ],
            "application_script": "phoenix_hypervisor_lxc_952.sh",
            "ports": [
                "6333:6333",
                "6334:6334"
            ],
            "health_check": {
                "command": "curl -s --fail http://localhost:6333",
                "retries": 5,
                "interval": 5
            },
            "pct_options": [
                "keyctl=1",
                "nesting=1",
                "mknod=1"
            ],
            "firewall": {
                "enabled": true,
                "rules": [
                    {
                        "type": "in",
                        "action": "ACCEPT",
                        "source": "10.0.0.153",
                        "proto": "tcp",
                        "port": "6333"
                    }
                ]
            },
            "dependencies": [
                "101"
            ],
            "volumes": [
                {
                    "name": "qdrant_data",
                    "pool": "quickOS-shared-prod-data-volumes",
                    "size_gb": 20,
                    "mount_point": "/qdrant/storage"
                }
            ],
            "start_at_boot": true,
            "boot_order": 3,
            "boot_delay": 5,
            "apparmor_profile": "unconfined",
            "apparmor_manages_nesting": false,
            "lxc_options": []
        },
        "101": {
            "name": "Nginx-Phoenix",
            "memory_mb": 4096,
            "swap_mb": 512,
            "cores": 4,
            "storage_pool": "quickOS-lxc-disks",
            "storage_size_gb": 32,
            "network_config": {
                "name": "eth0",
                "bridge": "vmbr0",
                "ip": "10.0.0.153/24",
                "gw": "10.0.0.1"
            },
            "mac_address": "52:54:00:67:89:B3",
            "gpu_assignment": "none",
            "unprivileged": true,
            "portainer_role": "infrastructure",
            "clone_from_ctid": "900",
            "features": [
                "base_setup"
            ],
            "pct_options": [
                "nesting=1"
            ],
            "lxc_options": [
                "lxc.mount.auto:sys:rw"
            ],
            "application_script": "phoenix_hypervisor_lxc_101.sh",
            "firewall": {
                "enabled": true,
                "rules": [
                    {
                        "type": "out",
                        "action": "ACCEPT",
                        "dest": "10.0.0.101",
                        "proto": "tcp",
                        "port": "9443"
                    }
                ]
            },
            "dependencies": [],
            "start_at_boot": true,
            "boot_order": 1,
            "boot_delay": 5,
            "apparmor_profile": "unconfined",
            "apparmor_manages_nesting": true,
            "mount_points": [
                {
                    "host_path": "/mnt/pve/quickOS/shared-prod-data/logs/nginx",
                    "container_path": "/logs/nginx"
                }
            ]
        },
        "914": {
            "name": "ollama-gpu0",
            "memory_mb": 32768,
            "cores": 6,
            "storage_pool": "quickOS-lxc-disks",
            "storage_size_gb": 128,
            "network_config": {
                "name": "eth0",
                "bridge": "vmbr0",
                "ip": "10.0.0.155/24",
                "gw": "10.0.0.1"
            },
            "mac_address": "52:54:00:67:89:B5",
            "gpu_assignment": "0",
            "unprivileged": true,
            "portainer_role": "none",
            "clone_from_ctid": "901",
            "features": [
                "nvidia",
                "ollama"
            ],
            "application_script": "phoenix_hypervisor_lxc_955.sh",
            "ports": [
                "11434:11434"
            ],
            "pct_options": [],
            "dependencies": [
                "101"
            ],
            "start_at_boot": true,
            "boot_order": 2,
            "boot_delay": 5,
            "apparmor_profile": "unconfined",
            "apparmor_manages_nesting": true,
            "lxc_options": [
                "lxc.apparmor.profile=unconfined"
            ]
        },
        "917": {
            "name": "llamacpp-gpu0",
            "memory_mb": 32768,
            "cores": 6,
            "storage_pool": "quickOS-lxc-disks",
            "storage_size_gb": 128,
            "network_config": {
                "name": "eth0",
                "bridge": "vmbr0",
                "ip": "10.0.0.157/24",
                "gw": "10.0.0.1"
            },
            "mac_address": "52:54:00:67:89:B7",
            "gpu_assignment": "0",
            "unprivileged": true,
            "portainer_role": "none",
            "clone_from_ctid": "901",
            "features": [
                "nvidia"
            ],
            "application_script": "phoenix_hypervisor_lxc_957.sh",
            "ports": [
                "8081:8081"
            ],
            "dependencies": [
                "101"
            ],
            "start_at_boot": true,
            "boot_order": 2,
            "boot_delay": 5,
            "apparmor_profile": "unconfined",
            "apparmor_manages_nesting": true,
            "lxc_options": [
                "lxc.apparmor.profile=unconfined"
            ]
        }
    }
}