{
    "$schema": "usr/local/phoenix_hypervisor/etc/phoenix_stacks_config.schema.json",
    "docker_stacks": {
        "qdrant_service": {
            "description": "Qdrant vector database for RAG.",
            "compose_file_path": "persistent-storage/qdrant/docker-compose.yml",
            "environments": {
                "production": {
                    "variables": [],
                    "files": [],
                    "services": {
                        "qdrant": {
                            "traefik_labels": [
                                "traefik.enable=true",
                                "traefik.http.routers.qdrant.rule=Host(`qdrant.internal.thinkheads.ai`)",
                                "traefik.http.routers.qdrant.entrypoints=mesh",
                                "traefik.http.routers.qdrant.tls=true",
                                "traefik.http.services.qdrant.loadbalancer.server.port=6333",
                                "traefik.http.services.qdrant.loadbalancer.server.scheme=http"
                            ]
                        }
                    }
                }
            }
        },
        "portainer_service": {
            "description": "Portainer management UI.",
            "compose_file_path": "persistent-storage/portainer/docker-compose.yml",
            "nginx_proxy": {
                "hostname": "portainer.internal.thinkheads.ai"
            },
            "environments": {
                "production": {
                    "variables": [],
                    "files": [],
                    "services": {
                        "portainer": {
                            "traefik_labels": [
                                "traefik.enable=true",
                                "traefik.tcp.routers.portainer.rule=HostSNI(`portainer.internal.thinkheads.ai`)",
                                "traefik.tcp.routers.portainer.entrypoints=mesh",
                                "traefik.tcp.routers.portainer.tls=true",
                                "traefik.tcp.routers.portainer.tls.passthrough=true",
                                "traefik.tcp.services.portainer.loadbalancer.server.port=9443"
                            ]
                        }
                    }
                }
            }
        },
        "thinkheads_ai_app": {
            "description": "The main Thinkheads.AI web application.",
            "compose_file_path": "stacks/thinkheads_ai_app/docker-compose.yml",
            "environments": {
                "production": {
                    "variables": [
                        {
                            "name": "DATABASE_USER",
                            "value": "prod_user"
                        },
                        {
                            "name": "DATABASE_PASS",
                            "value": "PROD_SECRET_PASSWORD"
                        },
                        {
                            "name": "API_PORT",
                            "value": "8000"
                        }
                    ],
                    "files": [
                        {
                            "source": "persistent-storage/thinkheads_ai/configs/prod.env",
                            "destination_in_container": "/app/.env"
                        }
                    ]
                },
                "testing": {
                    "variables": [
                        {
                            "name": "DATABASE_USER",
                            "value": "test_user"
                        },
                        {
                            "name": "DATABASE_PASS",
                            "value": "TEST_SECRET_PASSWORD"
                        },
                        {
                            "name": "API_PORT",
                            "value": "8001"
                        }
                    ],
                    "files": [
                        {
                            "source": "persistent-storage/thinkheads_ai/configs/test.env",
                            "destination_in_container": "/app/.env"
                        }
                    ]
                },
                "development": {
                    "variables": [
                        {
                            "name": "DATABASE_USER",
                            "value": "dev_user"
                        },
                        {
                            "name": "DATABASE_PASS",
                            "value": "DEV_SECRET_PASSWORD"
                        },
                        {
                            "name": "API_PORT",
                            "value": "8002"
                        }
                    ],
                    "files": [
                        {
                            "source": "persistent-storage/thinkheads_ai/configs/dev.env",
                            "destination_in_container": "/app/.env"
                        }
                    ]
                }
            }
        }
    }
}