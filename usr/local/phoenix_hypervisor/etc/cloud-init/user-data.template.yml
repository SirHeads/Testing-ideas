#cloud-config
hostname: __HOSTNAME__
manage_etc_hosts: true
users:
  - name: __USERNAME__
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: users, admin
    shell: /bin/bash
    lock_passwd: false
    passwd: "$6$IZCfjyCnr57kLlPA$eqctrwsGmoBoEKaM3eTCICfSmCqSrUhiiH2nfyyD91129IS205lB6kcDdNpzWG0zV79wJB8XEn7p.c0ewUPJg."
    ssh_pwauth: true
package_update: true
packages:
  - qemu-guest-agent
growpart:
  mode: auto
  devices: ['/']
write_files:
#FEATURE_FILES_PLACEHOLDER#
runcmd:
  - [ xfs_growfs, / ]
  - [ apt-get, -y, --reinstall, install, qemu-guest-agent ]
  - [ chmod, +x, /tmp/features/*.sh ]
  - [ /bin/bash, -c, "for script in /tmp/features/*.sh; do \"$script\"; done" ]
bootcmd:
  - sed -i 's/GRUB_CMDLINE_LINUX_DEFAULT="quiet"/GRUB_CMDLINE_LINUX_DEFAULT="console=ttyS0"/' /etc/default/grub
  - update-grub
output:
  all: '| tee -a /var/log/cloud-init-output.log | tee /dev/ttyS0'